spring:
  cloud:
    loadbalancer:
      cache:
        ttl: 10s
        caffeine:
          spec: expireAfterWrite=10s,maximumSize=8000

  security:
    oauth2:
      resourceserver:
        jwt:
          # âœ… å°é½Š gateway / authn çš„å–®ä¸€äº‹å¯¦ä¾†æºï¼ˆæœ¬åœ° docker ä¹Ÿé€šï¼‰
          issuer-uri: ${JWT_ISSUER_URI:http://api-gateway:8080/authn}
          jwk-set-uri: ${JWT_JWK_SET_URI:http://api-gateway:8080/authn/jwks/publicKey}

  datasource: # æ•¸æ“šæºé…ç½®
    url: jdbc:mysql://${MYSQL_HOST:}:${MYSQL_PORT:}/vcb_sit_master?rewriteBatchedStatements=true&useServerPrepStmts=true&cachePrepStmts=true&prepStmtCacheSize=256&prepStmtCacheSqlLimit=2048 # MySQL åœ°å€
    username: ${MYSQL_USERNAME:} # æ•¸æ“šåº«ç”¨æˆ¶åï¼Œå‹•æ…‹åŒ–è¨­ç½®
    password: ${MYSQL_PASSWORD:} # æ•¸æ“šåº«å¯†ç¢¼ï¼Œå»ºè­°é€šéç’°å¢ƒè®Šæ•¸é…ç½®
    driver-class-name: com.mysql.cj.jdbc.Driver # MySQL é©…å‹•é¡

  jpa: # JPA å’Œ Hibernate é…ç½®
    properties:
      hibernate:
        show_sql: false # é¡¯ç¤º SQL èªå¥ï¼ˆé–‹ç™¼ç’°å¢ƒé–‹å•Ÿï¼‰
        format_sql: false # æ ¼å¼åŒ– SQL èªå¥ï¼ˆé–‹ç™¼ç’°å¢ƒé–‹å•Ÿï¼‰
        # ğŸš€ æ‰¹æ¬¡è™•ç†æœ€ä½³åŒ–ï¼ˆå¤šç­† INSERT/UPDATE æ›´å¿«ï¼‰
        jdbc:
          batch_size: 50
        order_inserts: true     # ğŸ§© æŒ‰è¡¨åˆ†çµ„ INSERT
        order_updates: true     # ğŸ”„ æŒ‰è¡¨åˆ†çµ„ UPDATE
    hibernate:
      ddl-auto: validate # ç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨ none
    open-in-view: false # ç¦ç”¨ Open Session In Viewï¼Œä»¥æå‡æ€§èƒ½

# âš™ï¸ Landlord API çµ„æ…‹
landlord:
  # ğŸ”‘ Bearer Tokenï¼ˆå¾ç’°å¢ƒè®Šæ•¸ LANDLORD_BEARER_TOKEN è®€å–ï¼Œé è¨­ç©ºï¼‰
  bearer-token: ${LANDLORD_BEARER_TOKEN:}
  api:
    # ğŸŒ API URLï¼ˆå¯ç”±ç’°å¢ƒè®Šæ•¸ LANDLORD_API_URL è¦†å¯«ï¼‰
    url: ${LANDLORD_API_URL:https://landlord1-ajdrekbneqaug9hp.japaneast-01.azurewebsites.net}

app:
  security:
    jwt:
      # âœ… issuer å–®ä¸€ã€ç²¾æº–
      issuer: http://api-gateway:8080/authn                       # âœ… å¿…é ˆèˆ‡ token çš„ iss å®Œå…¨ä¸€è‡´
      # âœ… æ–°å¢ï¼šå¤š issuer å®¹å¿ï¼ˆä»»ä¸€å‘½ä¸­å³å¯ï¼‰
      accepted-issuers: http://api-gateway:8080/authn,http://api-gateway/authn
      # âœ… audience åªä¿ç•™ route hostï¼ˆä½ çš„æœå‹™åï¼‰
      accepted-audiences: api-gateway,http://api-gateway:8080,tenant-service  # âœ… å¿…é ˆåŒ…å«åœ¨ token çš„ aud é™£åˆ—ä¸­

# æŒ‡å®šä½¿ç”¨ log4j2-logstash.xml ä½œç‚º logging è¨­å®šæª”ï¼Œå•Ÿç”¨ Logstash è¼¸å‡º
logging:
  config: classpath:log4j2-logstash.xml

springdoc:
  swagger-ui:
    enabled: false       # é—œé–‰ Swagger UI é é¢ï¼ˆ/swagger-ui.htmlï¼‰ï¼Œé¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒæš´éœ² API æ–‡ä»¶
  api-docs:
    path: /v3/tenant-docs  # æ ¹æ“šæ¯å€‹å¾®æœå‹™è¨­è¨ˆè‡ªå·±çš„å‰ç¶´