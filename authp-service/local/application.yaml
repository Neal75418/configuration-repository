JWT_JWK_SET_URI: http://localhost:8080/authn/jwks/publicKey

authn:
  client:
    secret: ${AUTHP_CLIENT_SECRET:}

# ------- å•Ÿå‹•æœŸç”¨çš„ bootstrap ç§Ÿæˆ¶ -------
multitenancy:
  bootstrap-tenant: "__BOOTSTRAP__"   # å•Ÿå‹•/éè«‹æ±‚éšæ®µç”¨é€™å€‹å›ºå®šå€¼

app:
  mt:
    allow-bootstrap-tenant: true            # å…è¨±å•Ÿå‹•æœŸä½¿ç”¨ bootstrap tenant
    jdbc:
      sslMode: DISABLED                     # æœ¬åœ° MySQL å¤šåŠç„¡ SSL
      extra: ""

spring:
  cloud:
    loadbalancer:
      cache:
        ttl: 10s                      # ğŸ•’ LB å¯¦ä¾‹å¿«å–æœ‰æ•ˆæ™‚é–“ï¼ˆé è¨­ 35 ç§’ï¼‰
        caffeine:
          spec: expireAfterWrite=10s,maximumSize=10000  # âš¡ Caffeine æœ¬åœ°å¿«å–è¨­å®šï¼ˆå®¹é‡èˆ‡éæœŸï¼‰

  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: ${JWT_JWK_SET_URI:http://localhost:8080/authn/jwks/publicKey}

  datasource:
    url: ${DB_URL:jdbc:mysql://127.0.0.1:3306/vcb_dev_tenant_33333333333343338333333333333333?connectionTimeZone=SERVER&useUnicode=true&characterEncoding=UTF-8&rewriteBatchedStatements=true&cachePrepStmts=true&prepStmtCacheSize=256&prepStmtCacheSqlLimit=2048&sslMode=DISABLED&allowPublicKeyRetrieval=true}
    username: ${MYSQL_USERNAME:root}
    password: ${MYSQL_PASSWORD:Gss12345678}

  # æœ¬æ©Ÿæƒ³çœ‹ SQL å¯è¦†å¯«ç‚º trueï¼ˆé€šç”¨æª”é è¨­ç‚º falseï¼‰
  jpa: # JPA å’Œ Hibernate é…ç½®
    properties:
      hibernate:
        show_sql: true # é¡¯ç¤º SQL èªå¥ï¼ˆé–‹ç™¼ç’°å¢ƒé–‹å•Ÿï¼‰
        format_sql: true # æ ¼å¼åŒ– SQL èªå¥ï¼ˆé–‹ç™¼ç’°å¢ƒé–‹å•Ÿï¼‰
    hibernate:
      ddl-auto: validate # ç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨ none
    open-in-view: false # ç¦ç”¨ Open Session In Viewï¼Œä»¥æå‡æ€§èƒ½

  data:
    redis: # Redis é…ç½®
      host: ${REDIS_HOST:localhost} # Redis ä¸»æ©Ÿåœ°å€
      port: ${REDIS_PORT:6379} # Redis åŸ è™Ÿ
      password: ${REDIS_PASSWORD:GssAuthRedis111} # Redis å¯†ç¢¼ï¼ˆå¦‚æœæœ‰å‰‡å¡«å¯«ï¼‰
      timeout: 5s  # è¨­å®šé€£ç·šè¶…æ™‚ç‚º 5 ç§’
      lettuce:
        pool:
          max-active: 50      # æœ€å¤§é€£æ¥æ•¸
          max-idle: 15        # æœ€å¤§ç©ºé–’é€£æ¥æ•¸
          min-idle: 5         # æœ€å°ç©ºé–’é€£æ¥æ•¸
          max-wait: 2000ms    # é€£æ¥ç­‰å¾…æ™‚é–“

vital:
  api:
    url: https://member.vikosmos.com/   # ğŸ” Vital å¸³è™Ÿä¸­å¿ƒ API Base URLï¼ˆçµå°¾ä¿ç•™ /ï¼‰

invite-user-setting:
  case-bridge-url: https://cb-svc-web.vitalcb.com  # ğŸ§­ å•Ÿç”¨/é‡è¨­å¾ŒæˆåŠŸå›è·³åˆ° CaseBridge
  vital-login-url: https://member.vikosmos.com/cas/login?service=https%3A%2F%2Fwww.vikosmos.com%2Ftw%2F&locale=zh  # ğŸ”‘ CAS ç™»å…¥å…¥å£ï¼›service=å›è·³ç¶²å€ã€locale=ä»‹é¢èªç³»
  invitation-subject: é‚€è«‹ç”¨æˆ¶        # âœ‰ï¸ é‚€è«‹ä¿¡ä¸»æ—¨ï¼ˆå¯è¦†å¯«ï¼‰
  activation-subject: é–‹é€šç”¨æˆ¶        # ğŸš€ å•Ÿç”¨ä¿¡ä¸»æ—¨ï¼ˆå¯è¦†å¯«ï¼‰
  team-name: CaseBridge               # ğŸ‘¥ éƒµä»¶ä¸­çš„åœ˜éšŠé¡¯ç¤ºå

# âš™ï¸ CaseBridge | Tenant Provisioning è¨­å®š
provisioning:
  intake:
    # Controller çš„ã€ŒIntake å¯¬é¬†æ¨¡å¼ã€ä¸»é–‹é—œ
    # - é–‹å•Ÿï¼šç©º/å£ JSON ä¹Ÿå› 200ï¼Œä¸¦å›é¡¯/è¨˜éŒ„åŸå§‹è«‹æ±‚ï¼ˆåƒ… SIT/UAT ä½¿ç”¨ï¼‰
    # - é—œé–‰ï¼šç…§æ­£å¸¸åš´æ ¼é©—è­‰ï¼Œç„¡æ•ˆè«‹æ±‚å› 400
    # @Value("${provisioning.intake.enabled:false}")
    enabled: true

    probe:
      # Ingress æ¢é‡ï¼ˆFilterï¼‰é–‹é—œ
      # - é–‹å•Ÿï¼šåœ¨ Security å‰å°±æ””ä¸‹è«‹æ±‚åšå¯©è¨ˆè¨˜éŒ„ï¼Œé€£ 401/403 ä¹Ÿèƒ½çœ‹åˆ°åŸæ–‡
      # - é—œé–‰ï¼šä¸åšå‰ç½®è¨˜éŒ„
      # @Value("${provisioning.intake.probe.enabled:false}")
      enabled: true

      # æ¢é‡å¯è¨˜éŒ„çš„ Request Body æœ€å¤§ä½å…ƒçµ„æ•¸ï¼ˆè¶…éå³æˆªæ–·ï¼Œé¿å…è¢«å¤§åŒ…ç‚¸æ­»ï¼‰
      # @Value("${provisioning.intake.probe.maxBody:8192}")
      maxBody: 8192  # 8 KiB

springdoc:
  swagger-ui:
    enabled: false       # é—œé–‰ Swagger UI é é¢ï¼ˆ/swagger-ui.htmlï¼‰ï¼Œé¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒæš´éœ² API æ–‡ä»¶
  api-docs:
    path: /v3/authp-docs  # æ ¹æ“šæ¯å€‹å¾®æœå‹™è¨­è¨ˆè‡ªå·±çš„å‰ç¶´