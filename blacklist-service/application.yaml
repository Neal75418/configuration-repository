server:
  port: 8084

spring:
  cloud:
    consul:
      discovery:
        prefer-ip-address: true # 🌐 優先使用 IP 註冊與健康檢查
        health-check-path: /actuator/health # ❤️ 健康檢查端點路徑
        ip-address: ${SERVICE_IP:${spring.cloud.client.ip-address}} # 🧭 服務 IP，優先用環境變數覆寫
        service-name: ${spring.application.name}  # 🏷️ 服務名稱（註冊到 Consul）
        instance-id: ${spring.application.name}-${server.port}  # 🔢 實例 ID，避免埠號衝突

  cache:
    caffeine:
      spec: initialCapacity=100,maximumSize=500,expireAfterWrite=10m # Cache 初始容量、最大容量與過期時間配置

jwt:
  jwk-set-uri: ${JWT_JWK_SET_URI:http://api-gateway:8080/authn/jwks/publicKey}  # 🔐 公鑰集 JWK Set URI（驗簽用）
  issuer: ${JWT_ISSUER:http://api-gateway:8080/authn}                           # 🏷️ JWT 簽發者（iss），需與 Token 內完全一致
  clock-skew-seconds: 60                                                        # ⏱️ 容許的時鐘誤差（秒）
  accepted-audiences: ${JWT_ACCEPTED_AUDIENCES:api-gateway}                     # 🎯 可接受的受眾（aud）

app:
  security:
    public-paths:
      - "/actuator/health"
      - "/actuator/prometheus"

      # ---------- 📄 Swagger / OpenAPI ----------
      - "/swagger-ui.html"        # Swagger UI
      - "/swagger-ui/**"          # Swagger 靜態資源
      - "/v3/blacklist-docs"      # Blacklist 自訂 docs 入口