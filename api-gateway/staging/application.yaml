spring:
  web:
    resources:
      # ğŸš« é—œé–‰é è¨­ /staticã€/public ç­‰éœæ…‹è·¯å¾‘
      add-mappings: false

    cors:
      # ğŸª„ æŠŠ CorsWebFilter / CorsConfiguration çš„è¨­å®š
      #     è‡ªå‹•æ³¨å…¥åˆ° Spring Security 4xx/5xx å›æ‡‰
      add-to-spring-security: true

  cloud:
    consul:
      discovery:
        healthCheckUrl: http://api-gateway:${server.port}/actuator/health
        ip-address: ${SERVICE_IP:${spring.cloud.client.ip-address}} # IP åœ°å€ï¼Œå„ªå…ˆä½¿ç”¨å¤–éƒ¨å‚³å…¥çš„ç’°å¢ƒè®Šæ•¸

  data:
    redis:
      host: ${REDIS_HOST:auth_redis} # Redis ä¸»æ©Ÿåœ°å€ï¼Œæ”¯æŒå¤–éƒ¨ç’°å¢ƒè®Šæ•¸é…ç½®
      port: ${REDIS_PORT:6379}      # Redis é»˜èªç«¯å£
      password: ${REDIS_PASSWORD:}  # Redis å¯†ç¢¼ï¼Œç•™ç©ºè¡¨ç¤ºç„¡å¯†ç¢¼
      timeout: 5s  # è¨­å®šé€£ç·šè¶…æ™‚ç‚º 5 ç§’
      lettuce:
        pool:
          max-active: 50      # æœ€å¤§é€£æ¥æ•¸
          max-idle: 15        # æœ€å¤§ç©ºé–’é€£æ¥æ•¸
          min-idle: 5         # æœ€å°ç©ºé–’é€£æ¥æ•¸
          max-wait: 2000ms    # æœ€å¤§ç­‰å¾…æ™‚é–“

jwt:
  issuer: ${JWT_ISSUER_URI:${spring.cloud.client.ip-address}:8080/authn} # JWT ç°½ç™¼è€…çš„ URI
  jwk-set-uri: ${JWT_JWK_SET_URI:http://${spring.cloud.client.ip-address}:8080/authn/jwks/publicKey} # JWK å…¬é‘°çš„ URI
  signature-algorithm: ES256 # ä½¿ç”¨ ECï¼ˆæ©¢åœ“æ›²ç·šï¼‰ç°½åç®—æ³•
  time-skew:
    seconds: 60 # æ™‚é–“åç§»ï¼Œå…è¨± JWT é©—è­‰æ™‚å®¹å¿çš„æ™‚å·®
  valid:
    audiences: ${JWT_VALID_AUDIENCES:${spring.cloud.client.ip-address}} # JWT çš„å—çœ¾é©—è­‰

springdoc:
  swagger-ui:
    enabled: false       # é—œé–‰ Swagger UI é é¢ï¼ˆ/swagger-ui.htmlï¼‰ï¼Œé¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒæš´éœ² API æ–‡ä»¶
  api-docs:
    enabled: false       # é—œé–‰ OpenAPI JSON æ–‡ä»¶ï¼ˆ/v3/api-docsï¼‰ï¼Œé˜²æ­¢ API schema å¤–æ´©

# æŒ‡å®šä½¿ç”¨ log4j2-logstash.xml ä½œç‚º logging è¨­å®šæª”ï¼Œå•Ÿç”¨ Logstash è¼¸å‡º
logging:
  config: classpath:log4j2-logstash.xml

test:
  depot-id: ee197c49e2e9449c8b48874a45a1611d