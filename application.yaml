# application.ymlï¼ˆä¸»æª”æ¡ˆï¼Œå«æ‰€æœ‰ profile é…ç½®ï¼‰

spring:
  cloud:
    loadbalancer:
      cache:
        enabled: true # å•Ÿç”¨è² è¼‰å‡è¡¡å™¨çš„ç·©å­˜åŠŸèƒ½
    consul:
      discovery:
        health-check-interval: 30s # å¥åº·æª¢æŸ¥é–“éš”
        health-check-timeout: 15s # å¥åº·æª¢æŸ¥è¶…æ™‚

management:
  endpoints:
    web:
      exposure:
        include: "health,prometheus,info"
      base-path: /actuator
  endpoint:
    health:
      access: read-only
      show-details: when-authorized
      roles: SYSTEM_ADMIN

---

# ğŸ”§ local & devï¼šçµ¦å·¥ç¨‹å¸«çœ‹çš„æ¼‚äº® log

spring:
  config:
    activate:
      on-profile: local,dev

logging:
  level:
    root: INFO
    sun.rmi.transport.tcp: WARN
    javax.management.remote.rmi: WARN
    org.apache.http.wire: WARN
    org.springframework.boot.actuate.endpoint.web: INFO
    org.springframework.cloud.config.server.environment.NativeEnvironmentRepository: WARN
    org.springframework.security.web: INFO

  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

---

# ğŸ§ª sit & uatï¼šä¿æŒ info ç­‰ç´šï¼Œä¸ç”¨æ¼‚äº®æ ¼å¼ï¼ˆELK é€šå¸¸æ¥æ”¶ JSONï¼‰

spring:
  config:
    activate:
      on-profile: sit,uat

logging:
  level:
    root: INFO
    sun.rmi.transport.tcp: WARN
    javax.management.remote.rmi: WARN
    org.apache.http.wire: WARN
    org.springframework.boot.actuate.endpoint.web: INFO
    org.springframework.cloud.config.server.environment.NativeEnvironmentRepository: WARN
    org.springframework.security.web: INFO

---

# ğŸš€ prodï¼šå°ˆæ³¨éŒ¯èª¤èˆ‡è­¦å‘Šï¼Œæœ€å¤§é™åº¦é™ä½ noise

spring:
  config:
    activate:
      on-profile: prod

logging:
  level:
    root: WARN
    sun.rmi.transport.tcp: WARN
    javax.management.remote.rmi: WARN
    org.apache.http.wire: WARN
    org.springframework.boot.actuate.endpoint.web: WARN
    org.springframework.cloud.config.server.environment.NativeEnvironmentRepository: WARN
    org.springframework.security.web: WARN