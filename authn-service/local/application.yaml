spring:
  cloud:
    consul: # Consul æœå‹™è¨»å†Šèˆ‡ç™¼ç¾é…ç½®
      discovery:
        health-check-path: /actuator/health
        ip-address: ${SERVICE_IP:127.0.0.1} # å‹•æ…‹ IP åœ°å€
  security: # OAuth2 å®¢æˆ¶ç«¯é…ç½®
    oauth2:
      client:
        registration: # è¨»å†Šå®¢æˆ¶ç«¯ä¿¡æ¯
          oauth:
            provider: gss # è‡ªå®šç¾© OAuth2 æä¾›è€…åç¨±
            client-id: ${OAUTH_CLIENT_ID:oauth} # å®¢æˆ¶ç«¯ IDï¼Œé€šéç’°å¢ƒè®Šæ•¸é…ç½®
            client-secret: ${OAUTH_CLIENT_SECRET:secret} # å®¢æˆ¶ç«¯å¯†é‘°ï¼Œé€šéç’°å¢ƒè®Šæ•¸é…ç½®
            authorization-grant-type: authorization_code # æˆæ¬Šé¡å‹
            redirect-uri: ${BASE_URL:http://localhost:8080}/authn/oauth/callback # é‡å®šå‘ URIï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
        provider: # OAuth2 æä¾›è€…ç›¸é—œ URL
          gss:
            authorization-uri: https://member.vikosmos.com/cas/oauth2.0/authorize # æˆæ¬Š URL
            token-uri: https://member.vikosmos.com/cas/oauth2.0/token # ä»¤ç‰Œç™¼æ”¾ URL
            user-info-uri: https://member.vikosmos.com/cas/oauth2.0/profile # ç”¨æˆ¶ä¿¡æ¯ URL

  data:
    redis: # Redis é…ç½®
      host: ${REDIS_HOST:localhost} # Redis ä¸»æ©Ÿåœ°å€
      port: ${REDIS_PORT:6379} # Redis åŸ è™Ÿ
      password: ${REDIS_PASSWORD:GssAuthRedis111} # Redis å¯†ç¢¼ï¼ˆå¦‚æœæœ‰å‰‡å¡«å¯«ï¼‰
      timeout: 5s  # è¨­å®šé€£ç·šè¶…æ™‚ç‚º 5 ç§’
      lettuce:
        pool:
          max-active: 50      # æœ€å¤§é€£æ¥æ•¸
          max-idle: 15        # æœ€å¤§ç©ºé–’é€£æ¥æ•¸
          min-idle: 5         # æœ€å°ç©ºé–’é€£æ¥æ•¸
          max-wait: 2000ms    # é€£æ¥ç­‰å¾…æ™‚é–“

auth: # è‡ªå®šç¾©èªè­‰ç›¸é—œé…ç½®
  registration-id: oauth # OAuth2 è¨»å†Š ID
  redirect:
    final-uri: ${FINAL_URI:http://localhost:7001} # èªè­‰æˆåŠŸå¾Œé‡å®šå‘çš„ URI
  issuer: ${AUTH_ISSUER:http://localhost:8080/authn} # JWT ç°½ç™¼è€…çš„ URI
  aud: ${AUTH_AUDIENCES:http://localhost:8080} # JWT çš„å—çœ¾é©—è­‰
  token:
    max-retries: ${TOKEN_REFRESH_MAX_RETRIES:3} # æœ€å¤§é‡è©¦æ¬¡æ•¸ï¼ˆå»ºè­°å€¼ï¼š1-5ï¼‰
    buffer-time-seconds: 3600 # ç·©è¡æ™‚é–“ï¼ˆç§’ï¼‰ï¼Œæ­¤è™•ç‚º1å°æ™‚
    cache-duration-days: 7 # ç·©å­˜æœ‰æ•ˆæœŸé…ç½®ï¼ˆé»˜èªç‚º 7 å¤©ï¼‰
    access-token-expiration-ms: ${ACCESS_TOKEN_EXPIRATION:3600000}   # Access Token çš„éæœŸæ™‚é–“ï¼ˆ60 åˆ†é˜ï¼Œæ”¯æŒè¦†è“‹ï¼‰
    refresh-token-expiration-ms: ${TOKEN_REFRESH_EXPIRATION:2592000000} # Refresh Token çš„éæœŸæ™‚é–“ï¼ˆ30 å¤©ï¼Œæ”¯æŒè¦†è“‹ï¼‰
  keep-alive:
    token-url: https://member.vikosmos.com/cas/oauth2.0/token
    client-id: ${OAUTH_CLIENT_ID:oauth}
    client-secret: ${OAUTH_CLIENT_SECRET:secret}

jwt:
  key:
    id: ec-key-1       # é‡‘é‘°çš„å”¯ä¸€æ¨™è­˜ç¬¦ (Key ID, kid)ï¼Œé€šå¸¸ç”¨æ–¼å€åˆ†å¤šå€‹é‡‘é‘°
    curve: P-256       # æ©¢åœ“æ›²ç·š (Elliptic Curve, EC) çš„é¡å‹ï¼Œé€™è£¡ä½¿ç”¨çš„æ˜¯ P-256 æ›²ç·šï¼ˆä¹Ÿç¨±ç‚º secp256r1ï¼‰ï¼Œ
                       # å®ƒæ˜¯ä¸€ç¨®å¸¸ç”¨çš„æ©¢åœ“æ›²ç·šï¼Œæä¾›è‰¯å¥½çš„æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œé©åˆç”Ÿæˆå’Œé©—è­‰ JWT ç°½å

key:
  directory: ${KEY_DIRECTORY:keys/} # é‡‘é‘°å­˜æ”¾ç›®éŒ„
  private-file: ${KEY_PRIVATE_FILE:ec_private.key} # ç§é‘°æ–‡ä»¶å
  public-file: ${KEY_PUBLIC_FILE:ec_public.key} # å…¬é‘°æ–‡ä»¶å

authp:
  # ğŸ”— AuthP å¾®æœå‹™çš„å…§éƒ¨æœå‹™åç¨±ï¼ˆçµ¦ @LoadBalanced RestTemplate ä½¿ç”¨ï¼‰
  # æ‡‰ç‚º Consul / Eureka ä¸­è¨»å†Šçš„æœå‹™ IDï¼Œä¾‹å¦‚ "authp-service"
  internal-base-url: http://authp-service

  # ğŸ“ AuthP ä¸­ä½¿ç”¨è€…ç›¸é—œ API çš„å…±ç”¨å‰ç¶´
  # é è¨­ç‚º "/users"ï¼Œè‹¥æœªä¾†æ”¹ç‚ºç‰ˆæœ¬åŒ–è·¯å¾‘ï¼ˆä¾‹å¦‚ /v1/usersï¼‰å¯ç›´æ¥åœ¨æ­¤èª¿æ•´
  user-uri-prefix: /users

bizform: # BizForm å¤–éƒ¨ç³»çµ± API é…ç½®
  api:
    base-url: ${BIZFORM_API_BASE_URL:https://bizform.vikosmos.com} # BizForm API åŸºç¤ URL
    login-endpoint: /Backend/api/account/login # ç™»éŒ„ç«¯é»
    exchange-endpoint: /Backend/api/account/token # äº¤æ›æŒ‡å®šç«™å°çš„token

crm: # CRM å¤–éƒ¨ç³»çµ± API é…ç½®
  api:
    uri: http://crm-api.dev.local/Internal/auth

app:
  cookie:
    domain: localhost

test:
  depot-id: cspsd_test

springdoc:
  swagger-ui:
    enabled: false       # é—œé–‰ Swagger UI é é¢ï¼ˆ/swagger-ui.htmlï¼‰ï¼Œé¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒæš´éœ² API æ–‡ä»¶
  api-docs:
    path: /v3/authn-docs  # æ ¹æ“šæ¯å€‹å¾®æœå‹™è¨­è¨ˆè‡ªå·±çš„å‰ç¶´