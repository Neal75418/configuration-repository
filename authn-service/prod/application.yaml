spring:
  cloud:
    consul:
      discovery:
        healthCheckUrl: http://authn-service:${server.port}/actuator/health
        ip-address: ${SERVICE_IP:${spring.cloud.client.ip-address}}

  security: # OAuth2 å®¢æˆ¶ç«¯é…ç½®
    oauth2:
      client:
        registration: # è¨»å†Šå®¢æˆ¶ç«¯ä¿¡æ¯
          oauth:
            provider: gss # è‡ªå®šç¾© OAuth2 æä¾›è€…åç¨±
            client-id: ${OAUTH_CLIENT_ID:} # å®¢æˆ¶ç«¯ IDï¼Œé€šéç’°å¢ƒè®Šæ•¸é…ç½®
            client-secret: ${OAUTH_CLIENT_SECRET:} # å®¢æˆ¶ç«¯å¯†é‘°ï¼Œé€šéç’°å¢ƒè®Šæ•¸é…ç½®
            authorization-grant-type: authorization_code # æˆæ¬Šé¡å‹
            redirect-uri: ${BASE_URL:https://cb-svc-api.vitalext.com}}/authn/oauth/callback # é‡å®šå‘ URIï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
        provider: # OAuth2 æä¾›è€…ç›¸é—œ URL
          gss:
            authorization-uri: https://member.gsscloud.com/cas/oauth2.0/authorize # æˆæ¬Š URL
            token-uri: https://member.gsscloud.com/cas/oauth2.0/token # ä»¤ç‰Œç™¼æ”¾ URL
            user-info-uri: https://member.gsscloud.com/cas/oauth2.0/profile # ç”¨æˆ¶ä¿¡æ¯ URL

  data:
    redis: # Redis é…ç½®
      host: ${REDIS_HOST:auth_redis} # Redis ä¸»æ©Ÿåœ°å€
      port: ${REDIS_PORT:6379} # Redis åŸ è™Ÿ
      password: ${REDIS_PASSWORD:} # Redis å¯†ç¢¼ï¼ˆå¦‚æœæœ‰å‰‡å¡«å¯«ï¼‰
      timeout: 5s  # è¨­å®šé€£ç·šè¶…æ™‚ç‚º 5 ç§’
      lettuce:
        pool:
          max-active: 50      # æœ€å¤§é€£æ¥æ•¸
          max-idle: 15        # æœ€å¤§ç©ºé–’é€£æ¥æ•¸
          min-idle: 5         # æœ€å°ç©ºé–’é€£æ¥æ•¸
          max-wait: 2000ms    # é€£æ¥ç­‰å¾…æ™‚é–“

auth: # è‡ªå®šç¾©èªè­‰ç›¸é—œé…ç½®ï¼ˆç°½ç™¼å…±ç”¨ï¼šiss/aud/å­˜æ´»æ™‚é–“ï¼‰
  registration-id: oauth # OAuth2 è¨»å†Š IDï¼ˆğŸ‘¤ï¼‰
  redirect:
    final-uri: ${FINAL_URI:http://localhost:7001} # èªè­‰æˆåŠŸå¾Œé‡å®šå‘ï¼ˆğŸ‘¤ï¼‰

  # âœ… åŒæ™‚æ”¯æ´äººé¡ & æ©Ÿå™¨ï¼šçµ±ä¸€ç”¨å¸¶åŸ çš„ gateway DNS
  #   ï¼ˆä½ çš„ tenant-service ç¾åœ¨ä¹Ÿæ¥å—é€™å…©å€‹ issuerï¼Œé›™ä¿éšªï¼‰
  issuer: ${AUTH_ISSUER:http://api-gateway:8080/authn} # JWT ç°½ç™¼è€…ï¼ˆğŸ‘¤/ğŸ¤– çš†æœƒå¯«å…¥ issï¼‰
  aud: ${AUTH_AUDIENCES:api-gateway} # é è¨­å—çœ¾ï¼ˆå¸¸ç”¨æ–¼ğŸ‘¤ ä½¿ç”¨è€… tokenï¼‰
  token:
    max-retries: ${TOKEN_REFRESH_MAX_RETRIES:3} # æœ€å¤§é‡è©¦æ¬¡æ•¸ï¼ˆå»ºè­°å€¼ï¼š1-5ï¼‰
    buffer-time-seconds: 3600 # ç·©è¡æ™‚é–“ï¼ˆç§’ï¼‰ï¼Œæ­¤è™•ç‚º1å°æ™‚
    cache-duration-days: 7 # ç·©å­˜æœ‰æ•ˆæœŸé…ç½®ï¼ˆé»˜èªç‚º 7 å¤©ï¼‰
    access-token-expiration-ms: ${ACCESS_TOKEN_EXPIRATION:900000}   # Access Token çš„éæœŸæ™‚é–“ï¼ˆ15 åˆ†é˜ï¼Œæ”¯æŒè¦†è“‹ï¼‰
    refresh-token-expiration-ms: ${TOKEN_REFRESH_EXPIRATION:2592000000} # Refresh Token çš„éæœŸæ™‚é–“ï¼ˆ30 å¤©ï¼Œæ”¯æŒè¦†è“‹ï¼‰

# KeyPairServiceImpl ä½¿ç”¨çš„æª”æ¡ˆå„²å­˜è¨­å®šï¼ˆDERï¼‰ï¼ˆç°½ç« é‡‘é‘°ï¼ŒğŸ‘¤/ğŸ¤– å…±ç”¨ï¼‰
key:
  directory: ${KEY_DIRECTORY:keys} # é‡‘é‘°å­˜æ”¾ç›®éŒ„
  private-file: ${KEY_PRIVATE_FILE:ec_private.der} # ç§é‘°æ–‡ä»¶å
  public-file: ${KEY_PUBLIC_FILE:ec_public.der} # å…¬é‘°æ–‡ä»¶å

# ğŸ¤– M2M å– tokenï¼šä¸€å®šè¦å¸¶ä¸Š :8080ï¼Œå¦å‰‡ç°½ç™¼ç«¯/iss ä¸ä¸€è‡´
authn:
  token:
    url: ${AUTHN_TOKEN_URL:http://api-gateway:8080/authn/oauth2/token} # ğŸ¤– M2M token ç™¼è¡Œç«¯é»ï¼ˆclient_credentialsï¼‰

bizform: # BizForm å¤–éƒ¨ç³»çµ± API é…ç½®ï¼ˆå¤–éƒ¨äº¤æ›ï¼Œé€šå¸¸ğŸ‘¤ èµ·æ‰‹ï¼‰
  api:
    base-url: ${BIZFORM_API_BASE_URL:https://bizform.vitalyun.com} # BizForm API åŸºç¤ URL
    login-endpoint: /Backend/api/account/login # ç™»éŒ„ç«¯é»
    exchange-endpoint: /Backend/api/account/token # äº¤æ›æŒ‡å®šç«™å°çš„token

crm: # CRM å¤–éƒ¨ç³»çµ± API é…ç½®
  api:
    uri: http://crm-api.dev.local/Internal/auth

app:
  cookie:
    domain: vitalext.com

# æŒ‡å®šä½¿ç”¨ log4j2-logstash.xml ä½œç‚º logging è¨­å®šæª”ï¼Œå•Ÿç”¨ Logstash è¼¸å‡º
logging:
  config: classpath:log4j2-logstash.xml

springdoc:
  swagger-ui:
    enabled: false       # é—œé–‰ Swagger UI é é¢ï¼ˆ/swagger-ui.htmlï¼‰ï¼Œé¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒæš´éœ² API æ–‡ä»¶
  api-docs:
    enabled: false       # é—œé–‰ OpenAPI JSON æ–‡ä»¶ï¼ˆ/v3/api-docsï¼‰ï¼Œé˜²æ­¢ API schema å¤–æ´©
