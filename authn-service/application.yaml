server:
  address: 0.0.0.0
  port: 8081

spring:
  cloud:
    consul:
      discovery:
        prefer-ip-address: true
        service-name: ${spring.application.name}
        instance-id: ${spring.application.name}-${server.port}

  cache:
    caffeine:
      spec: initialCapacity=100,maximumSize=500,expireAfterWrite=10m # Cache åˆå§‹å®¹é‡ã€æœ€å¤§å®¹é‡èˆ‡éæœŸæ™‚é–“é…ç½®

static:
  resources:
    cache:
      period: 3600

app:
  security:
    public-paths:
      # ---------- ğŸŒ éœæ…‹è³‡æº ----------
      - "/public/**"            # å‰ç«¯éœæ…‹æª” (JS / CSS / img)
      - "/static/**"            # å‚³çµ± static ç›®éŒ„
      - "/favicon.ico"          # ç¶²ç«™ icon

      # ---------- ğŸ” å¥åº· / ç›£æ§ ----------
      - "/actuator/health"      # å¥åº·æª¢æŸ¥
      - "/actuator/prometheus"  # Prometheus æŒ‡æ¨™

      # ---------- ğŸ”‘ OIDC / JWT ç›¸é—œ ----------
      - "/authn/.well-known/**" # OIDC Discovery (AuthN è·¯å¾‘)
      - "/authn/jwks/publicKey" # JWK public key (AuthN è·¯å¾‘)
      - "/.well-known/**"       # OIDC Discovery root fallback
      - "/jwks/publicKey"       # JWK root fallback
      - "/authn/oauth/login"    # OAuth2 login
      - "/authn/oauth/callback" # OAuth2 callback
      - "/oauth/login"          # é€šç”¨ login fallback
      - "/oauth/callback"       # é€šç”¨ callback fallback
      - "/oauth2/authorization/**" # Spring Security OIDC ç«¯é»

      # ---------- ğŸ“„ Swagger / OpenAPI ----------
      - "/swagger-ui.html"      # Swagger UI
      - "/swagger-ui/**"        # Swagger éœæ…‹è³‡æº
      - "/v3/authn-docs"        # AuthN è‡ªè¨‚ docs å…¥å£

    # AuthN ç”¨ï¼šSecurityConfig ä¸­æ”¾è¡Œçš„ API
    permit-all:
      - "/oauth/token/exchange"     # ç³»çµ± JWT æ› BizForm å°ˆç”¨ JWT
      - "/oauth/token/exchange-callback"  # çµ¦ API Gateway æ› token ç”¨
      - "/oauth/logout"             # ä½¿ç”¨è€…ç™»å‡º
      - "/oauth/refresh-token"      # åˆ·æ–° access token
      - "/oauth/me"                 # å–å¾—ä½¿ç”¨è€…è³‡è¨Š
      - "/callback-token"           # ç°½ç™¼ iframe callback token
      - "/internal-token"           # ç°½ç™¼å¾®æœå‹™ internal token